"use strict";
var database_1 = require("./database");
var es6_promise_1 = require("es6-promise");
var Couchbase = (function () {
    function Couchbase() {
    }
    Couchbase.prototype.openDatabase = function (databaseName) {
        return new es6_promise_1.Promise(function (resolve, reject) {
            if (!window.cblite) {
                reject("Couchbase Lite is not installed!");
            }
            else {
                window.cblite.getURL(function (error, url) {
                    var database = new database_1.Database(url, databaseName);
                    database.getDatabase().then(function (result) {
                        resolve(database);
                    }, function (error) {
                        if (error.status == "404") {
                            database.createDatabase().then(function (result) {
                                resolve(database);
                            }, function (error) {
                                reject(error);
                            });
                        }
                    });
                });
            }
        });
    };
    return Couchbase;
}());
exports.Couchbase = Couchbase;
